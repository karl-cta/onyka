.sidebar-note-dragging {
  animation: sidebar-note-pickup 0.15s cubic-bezier(0.2, 0, 0, 1) forwards;
}

@keyframes sidebar-note-pickup {
  from { transform: scale(1); box-shadow: none; background: transparent; }
  to { transform: scale(1.02); box-shadow: 0 8px 20px -6px rgba(0,0,0,0.15); background: var(--color-bg-elevated); }
}

.sortable-item {
  transition: transform 200ms cubic-bezier(0.25, 1, 0.5, 1);
}

.drag-overlay-item {
  transform: scale(1.02) rotate(1deg);
  box-shadow: 0 12px 32px -8px rgba(0, 0, 0, 0.25), 0 0 0 2px var(--color-accent), 0 0 20px var(--color-accent-glow);
  background: var(--color-bg-elevated);
  border-radius: 0.5rem;
  transition: transform 0.15s cubic-bezier(0.2, 0, 0, 1), box-shadow 0.15s ease;
}

.folder-drop-target {
  background: linear-gradient(135deg, var(--color-accent-subtle), var(--color-accent-muted)) !important;
  box-shadow: inset 0 0 20px var(--color-accent-glow), 0 0 10px var(--color-accent-glow);
  animation: folder-pulse 1s ease-in-out infinite;
}

@keyframes folder-pulse {
  0%, 100% { box-shadow: inset 0 0 20px var(--color-accent-glow), 0 0 10px var(--color-accent-glow); }
  50% { box-shadow: inset 0 0 30px var(--color-accent-glow), 0 0 20px var(--color-accent-glow); }
}

.is-dragging {
  opacity: 0.4 !important;
  transform: scale(0.98) !important;
}

@keyframes item-exit {
  0% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.05); }
  100% { opacity: 0; transform: scale(0.8); }
}

.animate-item-exit {
  animation: item-exit 0.25s ease-out forwards;
}

@keyframes item-success {
  0% { background-color: transparent; transform: scale(0.95); opacity: 0; }
  30% { background-color: var(--color-accent-muted); transform: scale(1.02); opacity: 1; }
  100% { background-color: transparent; transform: scale(1); opacity: 1; }
}

.animate-item-success {
  animation: item-success 0.4s ease-out;
}

@keyframes folder-expand {
  0% { opacity: 0; transform: translateY(-8px); }
  100% { opacity: 1; transform: translateY(0); }
}

.animate-folder-expand {
  animation: folder-expand 0.2s ease-out;
}

.item-particles {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: visible;
}

.item-particles .particle {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--color-accent);
  top: 50%;
  left: 50%;
  opacity: 0;
}

.item-particles .particle-1 { animation: item-particle-1 0.4s ease-out forwards; }
.item-particles .particle-2 { animation: item-particle-2 0.4s ease-out forwards; }
.item-particles .particle-3 { animation: item-particle-3 0.4s ease-out forwards; }
.item-particles .particle-4 { animation: item-particle-4 0.4s ease-out forwards; }
.item-particles .particle-5 { animation: item-particle-5 0.4s ease-out forwards; }
.item-particles .particle-6 { animation: item-particle-6 0.4s ease-out forwards; }

@keyframes item-particle-1 { 0% { transform: translate(-50%, -50%) scale(1); opacity: 1; } 100% { transform: translate(calc(-50% + 30px), calc(-50% - 20px)) scale(0); opacity: 0; } }
@keyframes item-particle-2 { 0% { transform: translate(-50%, -50%) scale(1); opacity: 1; } 100% { transform: translate(calc(-50% - 25px), calc(-50% - 25px)) scale(0); opacity: 0; } }
@keyframes item-particle-3 { 0% { transform: translate(-50%, -50%) scale(1); opacity: 1; } 100% { transform: translate(calc(-50% + 35px), calc(-50% + 15px)) scale(0); opacity: 0; } }
@keyframes item-particle-4 { 0% { transform: translate(-50%, -50%) scale(1); opacity: 1; } 100% { transform: translate(calc(-50% - 30px), calc(-50% + 20px)) scale(0); opacity: 0; } }
@keyframes item-particle-5 { 0% { transform: translate(-50%, -50%) scale(1); opacity: 1; } 100% { transform: translate(calc(-50% + 15px), calc(-50% + 30px)) scale(0); opacity: 0; } }
@keyframes item-particle-6 { 0% { transform: translate(-50%, -50%) scale(1); opacity: 1; } 100% { transform: translate(calc(-50% - 15px), calc(-50% - 30px)) scale(0); opacity: 0; } }

.drop-indicator {
  position: absolute;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, transparent, var(--color-accent), transparent);
  border-radius: 2px;
  animation: drop-indicator-glow 1s ease-in-out infinite;
  z-index: 50;
}

.drop-indicator::before,
.drop-indicator::after {
  content: '';
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--color-accent);
  top: 50%;
  transform: translateY(-50%);
  box-shadow: 0 0 8px var(--color-accent-glow);
}

.drop-indicator::before { left: 0; }
.drop-indicator::after { right: 0; }

@keyframes drop-indicator-glow {
  0%, 100% { box-shadow: 0 0 6px var(--color-accent-glow); opacity: 0.8; }
  50% { box-shadow: 0 0 12px var(--color-accent-glow), 0 0 20px var(--color-accent-subtle); opacity: 1; }
}

@media (max-width: 767px) {
  .folder-drop-target {
    animation: none;
  }

  .drop-indicator {
    animation: none;
    opacity: 1;
  }

  .drag-overlay-item {
    box-shadow: 0 8px 20px -6px rgba(0, 0, 0, 0.2), 0 0 0 2px var(--color-accent);
  }
}
