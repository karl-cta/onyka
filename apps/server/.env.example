# ======================================================================
#  ONYKA — Environment Configuration
#
#  This file is OPTIONAL. Onyka works out of the box with zero config.
#  All secrets (JWT, encryption) are auto-generated on first launch.
#
#  To customize: cp .env.example .env
# ======================================================================


# ----------------------------------------------------------------------
# SERVER
# ----------------------------------------------------------------------

# "development" or "production"
NODE_ENV=development

# Server port (Docker uses 3000 by default)
PORT=3001


# ----------------------------------------------------------------------
# DATABASE
# ----------------------------------------------------------------------

# Path to the SQLite database (created automatically)
# Docker: /app/data/onyka.db
# Local:  ./data/onyka.db
DATABASE_URL=./data/onyka.db


# ----------------------------------------------------------------------
# AUTHENTICATION  (auto-generated)
# ----------------------------------------------------------------------

# JWT signing secret — AUTO-GENERATED on first startup if not set.
# Persisted to data/.jwt-secret. Set here only to override.
# JWT_SECRET=

# Access token lifetime (default: 15 minutes)
JWT_ACCESS_EXPIRY=15m

# Refresh token lifetime in days (default: 30)
JWT_REFRESH_EXPIRY_DAYS=30


# ----------------------------------------------------------------------
# ENCRYPTION AT REST  (auto-generated)
# ----------------------------------------------------------------------

# AES-256-GCM key for encrypting note/page/comment/spark content.
# AUTO-GENERATED on first startup if not set.
# Persisted to data/.encryption-key. Set here only to override.
#
# WARNING: Without this key, encrypted data is PERMANENTLY UNRECOVERABLE.
# Back up your data/ folder — it contains both the DB and the key.
#
# Generate manually: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# ENCRYPTION_KEY=


# ----------------------------------------------------------------------
# NETWORK & SECURITY
# ----------------------------------------------------------------------

# Allowed CORS origin(s)
# Development: http://localhost:5173
# Production:  https://notes.example.com
# Multiple:    https://app.example.com,https://admin.example.com
CORS_ORIGIN=http://localhost:5173

# Enable when behind a reverse proxy (Nginx, Caddy, Cloudflare)
# so rate limiting uses the real client IP instead of the proxy's.
# Values: "1" (one proxy hop), "loopback", or a specific proxy IP
# Do NOT use "true" — it trusts all proxies and allows IP spoofing.
# TRUST_PROXY=1

# Global rate limiting (requests per window)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=200


# ----------------------------------------------------------------------
# EMAIL / SMTP  (optional)
# ----------------------------------------------------------------------
# Required for: password reset, email verification, 2FA.
# Without SMTP, these features are disabled automatically.
# All three (SMTP_HOST, SMTP_USER, SMTP_PASS) must be set together.
#
# Port 587 = STARTTLS (recommended), Port 465 = SSL direct
#
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=you@example.com
# SMTP_PASS=your-smtp-password
# SMTP_SECURE=false
# SMTP_FROM=Onyka <noreply@example.com>

# Public URL of the frontend (used in email links)
# Production: https://notes.example.com
FRONTEND_URL=http://localhost:5173


# ----------------------------------------------------------------------
# ADMIN  (optional)
# ----------------------------------------------------------------------

# Pre-configure the first admin account.
# If not set, the first user to register becomes admin.
# ADMIN_USERNAME=admin
# ADMIN_EMAIL=admin@example.com


# ----------------------------------------------------------------------
# LIMITS & FEATURES
# ----------------------------------------------------------------------

# Max upload size in MB (images in the editor)
MAX_UPLOAD_SIZE_MB=10
